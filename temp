<?php
require("../config/config.php");
$title = "LoginMember | mmCupid";
$meta_content = "Online Dating | Myanmar Online Dating | find love | find lover";
$meta_keywords = "Online Dating,Myanmar Online Dating,find love,find lover";
if (isset($_POST["form_sub"]) || $_POST["form_sub"] == 1) {
  // echo 'hello';
  // die;
  $name = $mysqli->real_escape_string($_POST['name']);
  $password = ($_POST['password']);
  $confirm_password = ($_POST['confirm_password']);
  $email = ($_POST['email']);
  $confirm_password = ($_POST['confirm_password']);
  $phone = (int)($_POST['phone']);
  $birthday = (int)($_POST['birthday']);
  $birthday = (int)($_POST['birthday']);
}
require("../master/template-header.php");

?>

<div class="container my-5" ng-app="myApp" ng-controller="myCtrl" ng-init="init()">
  <div class="row">
    <!-- border -->
    <div class="col-md-4"></div>


    <div class="col-md-4">
      <h1 class="fw-bold" style="font-size: 60px">Sign up</h1>

      <div class="" ng-if="form1">
        <div class="fw-medium" style="font-size: 14px;">Sign up with your email or phone number</div>
        <input ng-model="name" placeholder="name" name="name" type="text" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" id="name" ng-blur="validate('name')" />
        <span class="text-danger" ng-if="error_name">{{ error_nameMessage }}</span>

        <input ng-model="password" placeholder="password" name="password" type="password" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" id="password" ng-blur="validate('password')" />
        <span class="text-danger" ng-if="error_password">{{ error_passwordMessage }}</span>


        <input ng-model="confirm_password" placeholder="confirm_password" name="confirm_password" type="password" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" id="confirm_password" ng-blur="validate('confirm_password')" ng-change="validate('confirm_password')" />
        <span class="text-danger" ng-if="error_confirm_password">{{ error_confirm_password_message }}</span>

        <input ng-model="email" placeholder="email" name="email" type="text" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" ng-blur="validate('email')" />
        <span class="text-danger" ng-if="error_email">{{ error_email_message }}</span>


        <input ng-model="phone" placeholder="phone" name="phone" type="number" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" />
        <span class="text-danger" ng-if="error_phone">{{ error_phone_message }}</span>

        <input ng-model="birthday" placeholder="birthday" name="birthday" id="birthday" type="text" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;" />
        <span class="text-danger" ng-if="error_password">{{ error_passwordMessage }}</span>


        <div class="form-check form-check-inline mt-2">
          <input ng-model="gender" class="form-check-input" type="radio" name="male" id="inlineRadio1" value="0">
          <label class="form-check-label" for="inlineRadio1">Male</label>
        </div>
        <div class="form-check form-check-inline">
          <input ng-model="gender" class="form-check-input" type="radio" name="female" id="inlineRadio2" value="1">
          <label class="form-check-label" for="inlineRadio2">Female</label>
        </div><br>

        <select name="city" id="" ng-model="city" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;">
          <option value="">choose ur town</option>
          <option ng-repeat="city in cities" value=" {{city.id}} ">{{ city.name}}</option>
        </select>
        <span class="text-danger" ng-if="error_city">{{ error_cityMessage }}</span><br>


        <label for="">Education</label>
        <textarea id="" name="education" ng-model="education" rows="2" cols="30" placeholder="tell me about your Education" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;">
                </textarea>

        <label for="">About</label>
        <textarea id="" name="about" ng-model="about" rows="4" cols="50" placeholder="tell me about yourself" class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;">
                  </textarea>



        <div class="form-control form-control-lg border border-1 border-black rounded rounded-4 mt-2" style="width:81vh;">
          <div class="row" style="width:81vh;">
            <div class="col"> <label for="height">Choose your feet</label>
              <select name="heightFeet" id="height" ng-model="heightFeet">
                <option value="">4'</option>
                <option value="">5'</option>
                <option value="">6'</option>
                <option value="">7'</option>
              </select>
            </div>
            <div class="col"> <label for="height">Choose your inches</label>
              <select name="heightInches" id="height" ng-model="heightInches">
                <option value="1">1"</option>
                <option value="2">2"</option>
                <option value="3">3"</option>
                <option value="4">4"</option>
                <option value="5">5"</option>
                <option value="6">6"</option>
                <option value="7">7"</option>
                <option value="8">8"</option>
                <option value="9">9"</option>
                <option value="10">10"</option>
              </select>
            </div>
          </div>
        </div>



        <button class="btn btn-dark rounded rounded-5 btn-lg mt-4" style="width:81vh;" ng-click="step1()" >
          Next
        </button>

        <input type="hidden" name="form-sub" value="1">


        <div class="py-3" style="font-size: 14px;">
          Already have an account? <a href="#" class="text-black">Log in</a>
        </div>
      </div>

      <div ng-if="form2">
        <h1>form2</h1>
        <div class="row">
          <div class="col-md-4" ng-repeat="hobby in hobbies">
            <div class="form-check form-check-inline">
              <input type="checkbox" name="" id="hobby-{{hobby.id}}" class="form-check-input" value="{{ hobby.id }}">
              <label type="checkbox" value="hobby-{{hobby.id}}" name="" id="" class="form-check-label">{{ hobby.name }}
            </div>
          </div>
        </div>
        
        <button ng-if="" class="btn btn-dark rounded rounded-5 btn-lg mt-4" style="width:81vh;" ng-click="step2()">
          Next
        </button>
        <input type="hidden" name="form_sub" value="1">
      </div>

      <!-- <div class="my-4">Or</div> -->
      <!-- <button class="btn btn-outline-secondary fs-6 text-black fw-medium rounded-4 btn-lg" style="width:81vh;">
            <i class="bi bi-google"></i> Continue with Google
          </button> -->

      <p class="w-75 mt-4 fw-medium text-center" style="font-size: 12px; line-height:16px;">By signing up, you agree to our
        <a href="" class="text-black">Terms & Conditions</a>. Learn how we
        use your data in our
        <a href="" class="text-black">Privacy Policy</a>
      </p>
    </div>
  </div>


  <!-- border -->
  <div class="col-md-4"></div>
</div>
</div>

<script src="<?php echo $baseUrl; ?>assets/css/front/register.js"></script>
<script>
  $(function() {
    $("#birthday").datepicker();
  });
</script>
<?php
require("../master/template-footer.php");
?>






<!-- register  -->
var app = angular.module("myApp", []);
app.controller("myCtrl", function ($scope, $http) {
  $scope.cities = [];
  $scope.hobbies = [];
  $scope.message = "";

  $scope.name = "";
  $scope.password = "";
  $scope.email = "";
  $scope.confirm_password = "";
  $scope.phone = "";
  $scope.city = "";
  $scope.birthday = "";
  $scope.gender = "";
  $scope.education = "";
  $scope.about = "";
  $scope.heightFeet = "";
  $scope.heightInches = "";

  $scope.init = function () {
    let req_url = base_url + "api/get_cities.php";
    $scope.form1 = true;
    $scope.form2 = false;
    $http.get(req_url).then(function (response) {
      $scope.cities = response.data;
    });
  };

  $scope.step1 = function () {
    // Reset error messages
    $scope.process_error = false;
    $scope.error_name = false;
    $scope.error_password = false;
    $scope.error_email = false;
    $scope.error_confirm_password = false;

    // Validate form fields
    if ($scope.name == "") {
      $scope.error_name = true;
      $scope.process_error = true;
    }
    if ($scope.password == "") {
      $scope.error_password = true;
      $scope.process_error = true;
    }
    if ($scope.email == "") {
      $scope.error_email = true;
      $scope.process_error = true;
    }
    if ($scope.confirm_password == "") {
      $scope.error_confirm_password = true;
      $scope.process_error = true;
    }

    if (!$scope.process_error) {
      let req_url = base_url + "api/get_hobbies.php";
      $http.get(req_url).then(function (response) {
        $scope.hobbies = response.data;
        $scope.form1 = false;
        $scope.form2 = true;
      });
    }
  };

  $scope.validate = function (field) {
    const form_field = $("#" + field).val();
    if (form_field === "") {
      switch (field) {
        case "name":
          $scope.error_name = true;
          break;
        case "password":
          $scope.error_password = true;
          break;
        case "confirm_password":
          $scope.error_confirm_password = true;
          break;
        case "email":
          $scope.error_email = true;
          break;
        default:
          break;
      }
    } else {
      switch (field) {
        case "name":
          $scope.error_name = false;
          break;
        case "password":
          $scope.error_password = false;
          break;
        case "confirm_password":
          const password = $("#password").val();
          const confirm_password = $("#confirm_password").val();
          if (password !== confirm_password) {
            $scope.error_confirm_password = true;
          } else {
            $scope.error_confirm_password = false;
          }
          break;
        case "email":
          $scope.error_email = false;
          break;
        default:
          break;
      }
    }
  };

  $scope.step2 = function () {
    $("#myForm").submit();
  };
});
